(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{173:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(31),c=n.n(r),i=n(8),o=n(7),s=n.n(o),l=n(12),u=n(19),d=n(21),j=function(e){return{type:"uiFinishLoading",payload:e}},p=function(e){return{type:"setErrorRegister",payload:e}},m=function(e){return{type:"removeErrorRegister",payload:e}},b=n(27);n(175),n(76);b.a.initializeApp({apiKey:"AIzaSyBjOIHu8pAupaYAJq6bBCEj2jBehSMfJ8A",authDomain:"journal-app-7298e.firebaseapp.com",projectId:"journal-app-7298e",storageBucket:"journal-app-7298e.appspot.com",messagingSenderId:"270984269275",appId:"1:270984269275:web:68b4ae826a4243e2ffebfe",measurementId:"G-G9TY906VML"});var h=b.a.firestore(),f=new b.a.auth.GoogleAuthProvider,O=function(){return{type:"logout"}},g=function(){return{type:"purchaseLogout"}},v=n(22),x=n.n(v),y=n(6),N=n(14),w=n.n(N),_=n(32),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},o=function(e){var t=e.target;c(Object(y.a)(Object(y.a)({},r),{},Object(_.a)({},t.name,t.value)))};return[r,o,i]},k=function(e,t){var n=!1;return e.forEach((function(e){e.id===t&&(n=!0)})),n},R=function(e){return function(e,t){var n=t().login.id,a={id:"".concat(Math.random()),title:"",desc:"",date:"",URL:""};e(I(n,a))}},C=function(e){var t=e.id,n=e.title,a=e.desc,r=(e.date,e.image);return function(){var e=Object(l.a)(s.a.mark((function e(c,i){var o,l,u,d,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i().login,l=o.id,u=o.name,d={title:n,desc:a,date:(new Date).getTime(),URL:r},e.next=4,h.collection("".concat(u,"-").concat(l,"/journal/notes")).get();case 4:if(j=e.sent,!k(j,t)){e.next=15;break}return w.a.fire({title:"Actualizando nota..",text:"Porfavor espere.",allowOutsideClick:!1,didOpen:function(){w.a.showLoading()}}),e.next=9,h.doc("".concat(u,"-").concat(l,"/journal/notes/").concat(t)).update(d);case 9:c(I(t,d)),c(D(t,d)),w.a.close(),e.next=20;break;case 15:return w.a.fire({title:"Creando nota..",text:"Porfavor espere.",allowOutsideClick:!1,didOpen:function(){w.a.showLoading()}}),e.next=18,h.collection("".concat(u,"-").concat(l,"/journal/notes")).add(d);case 18:c(A(l,u)),w.a.close();case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},E=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(){var c=Object(l.a)(s.a.mark((function c(i,o){return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:i(I(e,{id:e,title:t,desc:n,date:a,URL:r}));case 2:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()},I=function(e,t){return{type:"New Note",payload:Object(y.a)({id:e},t)}},U=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.collection("".concat(t,"/journal/notes")).get();case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(y.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){return function(){var n=Object(l.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(t+"-"+e);case 2:r=n.sent,a(S(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=function(e){return{type:"Load notes",payload:e}},D=function(e,t){return{type:"Note upload",payload:{id:e,note:Object(y.a)({id:e},t)}}},Y=function(e){return{type:"Delete Note",payload:{nid:e}}},P=(n(89),n(1));x.a.locale("es");var M=function(e){var t=e.Data,n=e.Key;console.log(n);var a=Object(i.b)(),r=t.title,c=t.desc,o=t.date,s=t.id,l=t.URL,u=x()(o);return Object(P.jsxs)("div",{className:"sidebar-item",onClick:function(){a(E(s,r,c,o,l))},children:[Object(P.jsx)("img",{src:l||"https://i.pinimg.com/564x/89/f1/64/89f16427098d3a0e757045b521144bac.jpg",alt:"img-icon"}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("h2",{children:[" ",r," "]}),Object(P.jsxs)("b",{children:[" ",u.format("dddd"),"  "]}),Object(P.jsxs)("b",{children:[" ",u.format("MMMM Do YYYY"),"  "]}),Object(P.jsxs)("a",{children:[" ",u.format("h:mm:ss a"),"  "]})]})]},n)},z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).notes,n=Object(i.c)((function(e){return e.login})),a=n.name,r=n.imageURL;return Object(P.jsxs)("div",{className:"animate__animated animate__slideInLeft animate__faster sidebar-conteiner",children:[Object(P.jsxs)("div",{className:"sidebar-user",children:[Object(P.jsxs)("div",{className:"sidebar-user-info",children:[Object(P.jsx)("h3",{className:"color-light-grey",children:"Bienvenido!"}),Object(P.jsx)("h3",{className:"color-light-grey",children:a.split(" ")[0]}),Object(P.jsxs)("button",{className:"btn background-light-grey",onClick:function(){e(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.auth().signOut();case 2:t(O()),t(g());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[Object(P.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]}),Object(P.jsx)("img",{className:"sidebar-user-image",src:r})]}),Object(P.jsxs)("div",{className:"new-entry",onClick:function(){e(R())},children:[Object(P.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/117/117885.png",alt:"img"}),Object(P.jsx)("h3",{children:" A\xf1adir nueva entrada"})]}),Object(P.jsx)("div",{className:"item-conteiner",children:t.map((function(e){return Object(P.jsx)(M,{Data:e,Key:e.date})}))})]})},G=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dxzcqv92g/upload?",(n=new FormData).append("file",t),n.append("upload_preset","journal-react-app"),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dxzcqv92g/upload?",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.next=17,a.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notes})).active,n=L(t),r=Object(u.a)(n,3),c=r[0],o=r[1],d=r[2],j=c.id,p=c.title,m=c.desc,b=c.URL,f=c.date,O=Object(a.useRef)(t.id),g=Object(a.useState)(t.URL),v=Object(u.a)(g,2),y=v[0],N=v[1];console.log(t.desc),Object(a.useEffect)((function(){t.id!==O.current&&(d(t),O.current=t.id,N(t.URL))}),[t,d]),Object(a.useEffect)((function(){e(E(j,p,m,f,b))}),[c,j,p,m,f,b,e]);var _=function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(C({id:j,title:p,desc:m,date:f,image:y}));case 2:e(R());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(P.jsxs)("div",{className:"note-screen",children:[Object(P.jsxs)("div",{className:"note-bar",children:[Object(P.jsx)("h3",{children:""===t.date?x()().format("dddd DD/MM/YYYY h:mm:ss a"):x()(t.date).format("dddd DD/MM/YYYY h:mm:ss a")}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Subir imagen"}),Object(P.jsx)("input",{id:"fileSelector",type:"file",name:"URL",style:{display:"none"},onChange:function(t){var n=t.target.files[0];n&&e(function(e,t,n){return function(){var a=Object(l.a)(s.a.mark((function a(r,c){var i,o,l,u,d,j;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=c().notes.active,o=i.date,l=i.desc,u=i.id,d=i.title,w.a.fire({title:"Subiendo imagen..",text:"Porfavor espere.",allowOutsideClick:!1,didOpen:function(){w.a.showLoading()}}),a.next=6,G(e);case 6:j=a.sent,t(j),r(E(u,d,l,o,j)),n({target:{name:"URL",value:j}}),w.a.close();case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(n,N,o))}}),Object(P.jsx)("button",{className:"btn",onClick:_,children:"Guardar nota"})]})]}),Object(P.jsxs)("div",{className:"notes-form ",children:[Object(P.jsx)("input",{name:"title",className:"animate__animated animate__slideInRight animate__faster note-form-tittle",type:"text",value:p,placeholder:"Coloque su maravilloso titulo",onChange:o}),Object(P.jsx)("textarea",{name:"desc",value:m,className:"animate__animated animate__slideInRight animate__faster note-form-textarea",placeholder:"Que se te ocurri\xf3 el d\xeda de hoy??",onChange:o}),Object(P.jsx)("div",{className:"animate__animated animate__slideInRight animate__faster note-form-image",children:Object(P.jsx)("img",{src:t.URL,alt:""})}),""!==t.id&&Object(P.jsx)("div",{className:"note-form-delete",onClick:function(){e(function(e){var t=e.id;return function(){var e=Object(l.a)(s.a.mark((function e(n,a){var r,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().login,c=r.id,i=r.name,w.a.fire({title:"Eliminando nota..",text:"Porfavor espere.",allowOutsideClick:!1,didOpen:function(){w.a.showLoading()}}),e.next=4,h.doc("".concat(i,"-").concat(c,"/journal/notes/").concat(t)).delete();case 4:n(Y(t)),w.a.close();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}({id:j}))},children:Object(P.jsx)("img",{src:"https://image.flaticon.com/icons/png/512/25/25008.png",alt:"trash-img"})})]})]})},q=function(){return Object(P.jsxs)("div",{className:"animate__animated animate__slideInRight animate__faster nothing-selected",children:[Object(P.jsx)("h3",{children:"Selecciona un nuevo diario o crea uno!"}),Object(P.jsx)("i",{className:"far fa-star fa-4x"})]})},T=function(){var e=Object(i.c)((function(e){return e.notes})).active,t=Object(i.b)();return t({type:"removeError",payload:""}),t(m("")),Object(P.jsxs)("div",{className:"journal-conteiner",children:[Object(P.jsx)(z,{}),e?Object(P.jsx)(B,{}):Object(P.jsx)(q,{})]})},J=n(9),W=function(e,t){return function(n){n({type:"uiStartLoading"}),b.a.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user,a=t.displayName,r=t.email,c=t.photoURL,i=t.uid;n(F(i,a,r,c)),n(j(Object(P.jsx)("div",{className:"success",children:"Logeado exitosamente!"})))})).catch((function(e){return n(function(e,t){var n=e.code;switch(console.log(e),n){case"auth/invalid-email":return t(j(Object(P.jsx)("div",{className:"alert",children:"Direcci\xf3n de correo err\xf3nea."})));case"auth/wrong-password":return t(j(Object(P.jsx)("div",{className:"alert",children:"La contrase\xf1a no es v\xe1lida."})));case"auth/user-not-found":return t(j(Object(P.jsx)("div",{className:"alert",children:"Usuario no encontrado."})));default:return t(j(Object(P.jsx)("div",{className:"alert",children:"Error en el logeo"})))}}(e,n))}))}},F=function(e,t,n,a){return{type:"login",payload:{id:e,name:t,email:n,photoURL:a}}},K=function(e){e.history;var t=Object(i.b)(),n=Object(i.c)((function(e){return e.uiLogin})),a=n.loading,r=n.msj,c=L({email:"",password:"",name:""}),o=Object(u.a)(c,2),s=o[0],l=o[1],j=s.email,p=s.password;return Object(P.jsxs)("div",{className:"animate__animated animate__zoomIn animate__faster login",children:[Object(P.jsx)("h1",{className:"ml-5 color-dark-primary",children:"Login"}),Object(P.jsxs)("form",{className:"login-form",children:[Object(P.jsx)("input",{type:"text",name:"email",className:"login-input ",placeholder:"Ingrese el mail",onChange:function(e){return l(e)}}),Object(P.jsx)("input",{type:"password",name:"password",className:"login-input ",placeholder:"Ingrese la contrase\xf1a",onChange:function(e){return l(e)}}),Object(P.jsx)("button",{name:"login",className:"btn",type:"submit",onClick:function(e){e.preventDefault(),t(W(j,p))},disabled:a,children:"Enviar"})]}),r,Object(P.jsxs)("div",{onClick:function(){t((function(e){b.a.auth().signInWithPopup(f).then((function(t){var n=t.user,a=n.displayName,r=n.email,c=n.photoURL,i=n.uid;e(F(i,a,r,c))}))}))},className:"google-btn",children:[Object(P.jsx)("div",{className:"google-icon-wrapper",children:Object(P.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(P.jsxs)("p",{className:"btn-text",children:["    ",Object(P.jsx)("b",{children:"Ingresa con Google"}),"   "]})]}),Object(P.jsx)(d.b,{className:"link",to:"/auth/register",children:"Todavia no tiene una cuenta?"})]})},H=n(34),Q=n.n(H),V=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:"register",payload:{id:e,name:t,email:n,photoURL:a}}},X=function(e){e.history;var t=Object(i.b)(),n=Object(i.c)((function(e){return e.uiRegister})).msj,a=L({email:"",name:"",password:"",repeatPassword:""}),r=Object(u.a)(a,2),c=r[0],o=r[1],j=c.email,h=c.password,f=c.name;return Object(P.jsxs)("div",{className:"animate__animated animate__zoomIn ; login",children:[Object(P.jsx)("h1",{className:"ml-5 color-dark-primary",children:"Register"}),Object(P.jsxs)("form",{className:"login-form",children:[Object(P.jsx)("input",{type:"text",className:"login-input ",name:"name",placeholder:"Ingrese el nombre",onChange:o}),Object(P.jsx)("input",{type:"text",className:"login-input",name:"email",placeholder:"Ingrese el mail",onChange:o}),Object(P.jsx)("input",{type:"password",className:"login-input ",name:"password",placeholder:"Ingrese la contrase\xf1a",onChange:o}),Object(P.jsx)("input",{type:"password",className:"login-input ",name:"repeatPassword",placeholder:"Repita la contrase\xf1a",onChange:o}),Object(P.jsx)("button",{className:"btn pointer hover-transform",type:"submit",onClick:function(e){e.preventDefault(),function(e,t){var n=e.email,a=e.name,r=e.password;return r!==e.repeatPassword?(t(p(Object(P.jsx)("div",{className:"alert",children:"Las contrase\xf1as son diferentes."}))),!1):Q.a.isEmpty(n)||Q.a.isEmpty(a)?(t(p(Object(P.jsx)("div",{className:"alert",children:"No puedes dejar campos vacios."}))),!1):r.trim().length<8?(t(p(Object(P.jsx)("div",{className:"alert",children:"La contrase\xf1a debe ser mayor a 8."}))),!1):Q.a.isEmail(n)?(t(m(Object(P.jsx)("div",{className:"success",children:"Registrado correctamente"}))),!0):(t(p(Object(P.jsx)("div",{className:"alert",children:"Email invalido."}))),!1)}(c,t)&&(console.log("ok"),t(function(e,t,n){return console.log(n),function(a){b.a.auth().createUserWithEmailAndPassword(e,t).then(function(){var t=Object(l.a)(s.a.mark((function t(r){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.user,t.next=3,c.updateProfile({displayName:n});case 3:a(V(c.uid,c.displayName,e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}}(j,h,f)))},children:"Enviar"})]}),n,Object(P.jsx)(d.b,{to:"/auth/login",className:"link",children:"Ya tengo una cuenta"})]})},Z=function(){return Object(P.jsx)("div",{className:"auth_main",children:Object(P.jsx)("div",{className:"auth_conteiner",children:Object(P.jsx)(d.a,{children:Object(P.jsxs)(J.d,{children:[Object(P.jsx)(J.b,{exact:!0,path:"/auth/login",component:K}),Object(P.jsx)(J.b,{exact:!0,path:"/auth/register",component:X})]})})})})},$=n(33),ee=["isAuthenticated","component"],te=function(e){var t=e.isAuthenticated,n=e.component,a=Object($.a)(e,ee);return Object(P.jsx)(J.b,Object(y.a)(Object(y.a)({},a),{},{component:function(e){return t?Object(P.jsx)(n,Object(y.a)({},e)):Object(P.jsx)(J.a,{to:"/auth/login"})}}))},ne=["isAuthenticated","component"],ae=function(e){var t=e.isAuthenticated,n=e.component,a=Object($.a)(e,ne);return Object(P.jsx)(J.b,Object(y.a)(Object(y.a)({},a),{},{component:function(e){return t?Object(P.jsx)(J.a,{to:"/"}):Object(P.jsx)(n,Object(y.a)({},e))}}))},re=function(){var e=Object(i.b)(),t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),j=Object(u.a)(o,2),p=j[0],m=j[1];return Object(a.useEffect)((function(){b.a.auth().onAuthStateChanged(function(){var t=Object(l.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===n||void 0===n?void 0:n.uid)?(e(F(n.uid,n.displayName,n.email,n.photoURL)),m(!0),e(A(n.uid,n.displayName))):m(!1),c(!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]),r?Object(P.jsxs)("div",{className:"loading-img",children:[Object(P.jsx)("img",{src:"https://coresys.com.ar/Admin/uploads/cargando.gif",alt:"loading"}),Object(P.jsx)("h1",{children:"Cargando.."})]}):Object(P.jsxs)(d.a,{children:[Object(P.jsx)(ae,{path:"/auth",isAuthenticated:p,component:Z}),Object(P.jsx)(te,{exact:!0,path:"/",isAuthenticated:p,component:T})]})},ce=n(28),ie=n(64),oe=n(65),se={loading:!1,msj:null},le={notes:[],active:null},ue=Object(ce.combineReducers)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return{id:t.payload.id,name:t.payload.name,email:t.payload.email,imageURL:t.payload.photoURL};case"logout":return{};default:return e}},uiLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setErrorLogin":case"removeErrorLogin":return Object(y.a)(Object(y.a)({},e),{},{msj:t.payload});case"uiStartLoading":return{loading:!0};case"uiFinishLoading":return Object(y.a)(Object(y.a)({},e),{},{loading:!1,msj:t.payload});default:return e}},uiRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setErrorRegister":case"removeErrorRegister":return{msj:t.payload};default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register":return{id:t.payload.id,name:t.payload.name,email:t.payload.email,imageURL:t.payload.imageURL};default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"New Note":return Object(y.a)(Object(y.a)({},e),{},{active:t.payload});case"Load notes":return Object(y.a)(Object(y.a)({},e),{},{notes:t.payload});case"Note upload":return Object(y.a)(Object(y.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case"Delete Note":return Object(y.a)(Object(y.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload.nid}))});case"purchaseLogout":return Object(y.a)(Object(y.a)({},e),{},{active:null,notes:[]});default:return e}}}),de=Object(ie.composeWithDevTools)({}),je=Object(ce.createStore)(ue,de(Object(ce.applyMiddleware)(oe.a))),pe=function(){return Object(P.jsx)("div",{children:Object(P.jsx)(i.a,{store:je,children:Object(P.jsx)(re,{})})})};n(173);c.a.render(Object(P.jsx)(pe,{}),document.getElementById("root"))}},[[174,1,2]]]);
//# sourceMappingURL=main.90d160f5.chunk.js.map